<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ì„¤ì¹˜ë¹„ ë¯¸ë¦¬ë³´ê¸°</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>



#q3_1,
#q3_1_1 {
    display: none !important;
}


/* =================== [ê¸°ë³¸ ìŠ¤íƒ€ì¼] =================== */
body{font-family:'Noto Sans KR',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#fff;color:#222}
h2{margin:0;text-align:center;background:#007bff;color:#fff;padding:20px 10px}
.layout-wrapper{display:flex;justify-content:flex-start;align-items:flex-start;width:100%}
.layout-left{flex:1;max-width:1200px;margin:0 auto;padding:0 20px;text-align:left}
.container{width:100%;margin:40px auto 0;padding:0}

/* =================== [ê¸°ë³¸ ì„¤ì¹˜ë¹„ ì¹´ë“œ] =================== */
.install-cards{display:grid;grid-template-columns:repeat(4,minmax(220px,1fr));gap:16px;max-width:1200px;margin:0 auto}

/* ì œëª© + base-head ë©ì–´ë¦¬ ì „ì²´ë¥¼ 4ì»¬ëŸ¼ ìœ„ì— ê°€ë¡œë¡œ ê½‰ ì°¨ê²Œ */
.install-cards > h3,
.install-cards > .base-head{
  grid-column:1 / -1;
}

/* ì œëª© ì•„ë˜ ì„¤ëª… + ê²½ê³ ë¬¸êµ¬ë¥¼ ê°€ë¡œ ë°°ì¹˜ */
.base-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  margin:0 0 16px;
}

/* ì™¼ìª½ ì„¤ëª… ë¬¸êµ¬ */
.base-head .desc{
  margin:0;
  color:#555;
}

/* ì˜¤ë¥¸ìª½ ê²½ê³  ë¬¸êµ¬ */
.base-head .notice{
  margin:0;
  padding:12px 16px;
  border-radius:8px;
  background:#f7f7f9;
  color:#555;
  font-size:13px;
  line-height:1.6;
  border:1px solid #e1e3e8;
  display:inline-flex;
  align-items:center;
  gap:6px;
  white-space:nowrap;
}

.base-head .notice-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:18px;
  height:18px;
  border-radius:50%;
  border:1px solid #d0d3db;
  font-size:11px;
  font-weight:600;
  color:#777;
  background:#fff;
}

/* íƒœë¸”ë¦¿ & ëª¨ë°”ì¼ì—ì„œëŠ” ì„¸ë¡œë¡œ (p ë°‘ì— ê²½ê³ ë¬¸êµ¬) */
@media (max-width:992px){
  .base-head{
    flex-direction:column;
    align-items:flex-start;
  }
  .base-head .notice{
    white-space:normal;
    margin-top:4px;
  }
}

.card{min-width:0;border:1px solid #ddd;border-radius:10px;text-align:center;padding:20px;cursor:pointer;transition:.2s;background:#fff;display:flex;flex-direction:column;align-items:center}
.card:hover{border-color:#007bff;box-shadow:0 0 10px rgba(0,0,0,.1)}
.card.active{background:#eaf4ff;border-color:#007bff}
.card h4{margin:10px 0 5px}
.card img{width:100%;max-width:160px;max-height:140px;object-fit:contain;display:block;margin:0 auto 8px;border-radius:8px}
@media (max-width:992px){.install-cards{grid-template-columns:repeat(2,minmax(220px,1fr))}}
@media (max-width:576px){.install-cards{grid-template-columns:1fr}}

/* =================== [ì˜µì…˜ ë°•ìŠ¤] =================== */
.option-box{background:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:24px 20px;max-width:1150px;width:100%;margin:24px auto 0;box-shadow:0 2px 6px rgba(0,0,0,.05);text-align:left}
.install-cards .option-box{grid-column:1/-1}

/* =================== [ê³µí†µ ë²„íŠ¼/í–‰] =================== */
.row{display:flex;flex-wrap:wrap;gap:10px}
.btn{display:inline-block;min-width:180px;text-align:center;padding:12px 16px;font-size:16px;font-weight:600;color:#fff;background:#007bff;border:none;border-radius:8px;cursor:pointer;transition:.2s}
.btn:hover{background:#0056b3}
.btn-outline{background:#fff;color:#007bff;border:1px solid #007bff}
.btn-outline:hover{background:#eaf4ff}

/* =================== [ì´ë¯¸ì§€ ë²„íŠ¼ ì¹´ë“œí˜• - ê¸°ë³¸] =================== */
.btn.btn-img,.btn-outline.btn-img{
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;
  width:100%;padding:0;border-radius:12px;background:#fff;border:1px solid #007bff;overflow:hidden;transition:.2s;box-shadow:0 2px 5px rgba(0,0,0,.05)
}
.btn.btn-img:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,123,255,.18)}
.btn-img .thumb{width:100%;aspect-ratio:4/3;overflow:hidden;background:#f2f2f2}
.btn-img .thumb img{width:100%;height:100%;object-fit:cover;display:block}
.btn-img .label{display:block;width:100%;background:#007bff;color:#fff;font-weight:700;padding:12px 10px;font-size:15px;line-height:1.35}

/* âœ… ì„ íƒëì„ ë•Œ(active) ì „ì—­ í•˜ì´ë¼ì´íŠ¸ */
.btn-img.active{
  border-color:#0056b3;
  transform:translateY(-3px);
  box-shadow:0 10px 22px rgba(0,123,255,.25);
}

.btn-img.active .label{
  background:#0056b3;
  color:#fff;
}
/* =================== [3-2-1-1 / 3-2-1-2 / 3-2-2 ì „ìš© - ì´ë¯¸ì§€ ì •ë¦¬] =================== */
#q3_2_1_1 .btn-img .thumb,
#q3_2_1_2 .btn-img .thumb,
#q3_2_2   .btn-img .thumb{
  width:100%;
  aspect-ratio:4/3;
  overflow:hidden;
  padding:12px;
  margin-bottom:8px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  box-sizing:border-box;
}
#q3_2_1_1 .btn-img .thumb img,
#q3_2_1_2 .btn-img .thumb img,
#q3_2_2   .btn-img .thumb img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  object-fit:contain;
  display:block;
}

/* =================== [ê³µí†µ ì„¹ì…˜/ë¬¸í•­] =================== */
.section{margin-bottom:48px}
.section h3{margin:0 0 10px}
.desc{color:#555;margin:0 0 16px}
.question{margin:18px 0;padding:20px;border:1px solid #eee;border-radius:10px;background:#f9f9f9}
.question p{font-weight:bold;margin:0 0 12px}
.subwrap{margin-top:12px;border-top:1px dashed #cfe2ff;padding-top:12px}

/* =================== [ì…ë ¥/ê²°ê³¼] =================== */
input[type="number"]{width:100%;max-width:360px;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:6px;margin-bottom:10px}
#baseMoveResult{display:none;margin-top:14px;font-size:18px;font-weight:bold;color:#007bff}
#resultBox{display:none;margin-top:24px;padding:20px;border:2px solid #007bff;border-radius:10px;background:#eaf4ff}
#resultBox h3{margin-top:0;color:#007bff}

/* ===== [ì˜ˆìƒ ê²¬ì  í‘œì‹œ ìŠ¤íƒ€ì¼] ===== */
#resultText{ line-height:1.6; }
#resultBox p{ margin:0; }
#resultBox h3{ margin-bottom:10px; }
#resultText strong{ font-weight:800; }

/* =================== [CTA/ë¡œê³ ] =================== */
.cta{text-align:center;margin:30px auto 0}
.cta a{display:inline-block;background:#007bff;color:#fff;padding:12px 24px;border-radius:6px;text-decoration:none;margin:0 5px;transition:.2s}
.cta a:hover{background:#0056b3}

/* =================== [ë„¤ë¹„ ë²„íŠ¼ ì¤‘ì•™ ì •ë ¬] =================== */
.nav-row{
  display:grid !important;
  grid-template-columns: repeat(2, minmax(160px, auto));
  justify-content:center;
  justify-items:stretch;
  gap:10px;
  margin-top:8px;
}
.nav-row .btn,.nav-row .btn-outline{width:100%; min-width:unset; justify-content:center}

/* =================== [ë°˜ì‘í˜• ê·¸ë¦¬ë“œ] =================== */
#part3 .question .row,#typeButtons{
  display:grid !important;
  grid-template-columns: 1fr;
  gap:16px;
  justify-items:center;
  justify-content:center;
}
@media (min-width:768px) and (max-width:1013.98px){
  #part3 .question .row.cols-2,#typeButtons{grid-template-columns:repeat(2, minmax(260px, 320px))}
  #part3 .question .row.cols-3{grid-template-columns:repeat(3, minmax(240px, 300px))}
}
@media (min-width:1014px){
  #part3 .question .row.cols-2,#typeButtons{grid-template-columns:repeat(2, minmax(300px, 360px))}
  #part3 .question .row.cols-3{grid-template-columns:repeat(3, minmax(300px, 360px))}
}
#part3 .question .row .btn,#part3 .question .row .btn-outline,#typeButtons .btn,#typeButtons .btn-outline{width:100%;min-width:unset;justify-content:center}

.fade{opacity:0;transform:translateY(-6px);transition:opacity .2s,transform .2s}
.fade.show{opacity:1;transform:none}

/* =================== [íŠ¹ì • êµ¬ê°„ ë„¤ë¹„ ì œê±°] =================== */
#q3_1 .nav-row,#q3_1_1 .nav-row,#q3_2 .nav-row,#q3_2_1 .nav-row,#q3_2_2 .nav-row{display:none !important}

/* =================== [ë©€í‹°í˜• ì…ë ¥ 2ì¹¸ ë ˆì´ì•„ì›ƒ] =================== */
#pipeInputs_multi .grid-2{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:768px){#pipeInputs_multi .grid-2{grid-template-columns:1fr 1fr}}
#pipeInputs_multi label{display:block;margin:8px 0 4px}
#pipeInputs_multi input{width:100%}


/* =======================
   ğŸ”µ í‰ìˆ˜ ë²„íŠ¼(active) í•˜ì´ë¼ì´íŠ¸
   ======================= */
.btn.active {
  background: #0056b3 !important;   /* ì§„í•œ íŒŒë‘ */
  color: #fff !important;
  border-color: #0056b3 !important;
  transform: translateY(-3px);
  box-shadow: 0 8px 22px rgba(0, 123, 255, 0.25);
}



</style>
</head>

<body>
<h2>ì„¤ì¹˜ë¹„ ë¯¸ë¦¬ë³´ê¸°</h2>

<div class="layout-wrapper">
  <div class="layout-left">

    <!-- â‘  ê¸°ë³¸ ì„¤ì¹˜ë¹„ -->
    <div class="container">
      <div class="install-cards">
        <h3>â‘  ê¸°ë³¸ ì„¤ì¹˜ë¹„</h3>

        <!-- ì œëª© ì•„ë˜ ì„¤ëª… + ì•ˆë‚´ë¬¸ (ë°ìŠ¤í¬í†±: ì˜†, ëª¨ë°”ì¼: ì•„ë˜) -->
        <div class="base-head">
          <p class="desc">
            ê¸°ë³¸ ì„¤ì¹˜ë¹„ëŠ” ì—ì–´ì»¨ ì¢…ë¥˜ì™€ í‰í˜•ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ì•„ë˜ì˜ ì—ì–´ì»¨ ì¢…ë¥˜ì™€ í‰í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
          </p>

          <p class="notice">
            <span class="notice-icon">!</span>
            <span>
              <strong>ìƒì—…ìš© ë° ì²œì¥í˜• ì—ì–´ì»¨ì€ ë³„ë„ ì „í™” ìƒë‹´ ë°”ëë‹ˆë‹¤.</strong>
            </span>
          </p>
        </div>

        <div class="card" onclick="showOptions('opt_wallCool', this, 'wallCool')">
          <h4>ë²½ê±¸ì´í˜•(ëƒ‰ë°©ì „ìš©)</h4>
          <img src="wall_cool.png" alt="ë²½ê±¸ì´í˜•(ëƒ‰ë°©ì „ìš©)">
        </div>
        <div class="card" onclick="showOptions('opt_wallHeat', this, 'wallHeat')">
          <h4>ë²½ê±¸ì´í˜•(ëƒ‰ë‚œë°©ê²¸ìš©)</h4>
          <img src="wall_cool.png" alt="ë²½ê±¸ì´í˜•(ëƒ‰ë‚œë°©ê²¸ìš©)">
        </div>
        <div class="card" onclick="showOptions('opt_stand', this, 'stand')">
          <h4>ê°€ì •ìš© ìŠ¤íƒ ë“œí˜•</h4>
          <img src="stand_3.png" alt="ê°€ì •ìš© ìŠ¤íƒ ë“œí˜•">
        </div>
        <div class="card" onclick="showOptions('opt_multi', this, 'multi')">
          <h4>ë©€í‹°í˜•(2in1)</h4>
          <img src="multi.png" alt="ë©€í‹°í˜•(2in1)">
        </div>

        <!-- ë²½ê±¸ì´ ëƒ‰ë°© -->
        <div id="opt_wallCool" class="option-box" style="display:none;">
          <p>ë²½ê±¸ì´(ëƒ‰ë°©ì „ìš©) í‰í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
          <div class="row">
            <button class="btn" onclick="selectBasePrice('wallCool',150000,18000)">6~9í‰</button>
            <button class="btn" onclick="selectBasePrice('wallCool',170000,20000)">10~14í‰</button>
            <button class="btn" onclick="selectBasePrice('wallCool',190000,20000)">15~16í‰</button>
          </div>
        </div>

        <!-- ë²½ê±¸ì´ ëƒ‰ë‚œë°© -->
        <div id="opt_wallHeat" class="option-box" style="display:none;">
          <p>ë²½ê±¸ì´(ëƒ‰ë‚œë°©ê²¸ìš©) í‰í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
          <div class="row">
            <button class="btn" onclick="selectBasePrice('wallHeat',200000,20000)">7~9í‰</button>
            <button class="btn" onclick="selectBasePrice('wallHeat',230000,22000)">10~14í‰</button>
            <button class="btn" onclick="selectBasePrice('wallHeat',250000,22000)">15~16í‰</button>
          </div>
        </div>

        <!-- ìŠ¤íƒ ë“œ -->
        <div id="opt_stand" class="option-box" style="display:none;">
          <p>ê°€ì •ìš© ìŠ¤íƒ ë“œí˜• ì„¤ì¹˜ ë¹„ìš©</p>
          <div class="row">
            <button class="btn" onclick="selectBasePrice('stand',200000,25000)">â‚©200,000</button>
          </div>
        </div>

        <!-- ë©€í‹°í˜• -->
        <div id="opt_multi" class="option-box" style="display:none;">
          <p>ë©€í‹°í˜•(2in1) ì„¤ì¹˜ ë¹„ìš©</p>
          <div class="row">
            <button class="btn" onclick="selectBasePrice('multi',290000,18000,25000)">â‚©290,000</button>
          </div>
        </div>
      </div>
    </div>
    <div id="baseMoveResult">ì„ íƒí•˜ì‹  ê¸°ë³¸ì„¤ì¹˜ ë¹„ìš©ì€ <span id="baseMovePrice"></span>ì› ì…ë‹ˆë‹¤.</div>

    <!-- â‘¡ ì¶”ê°€ ì„¤ì¹˜ë¹„ -->
    <div class="container" id="part3" style="display:none;">
      <div class="section">
        <h3>â‘¡ ì¶”ê°€ ì„¤ì¹˜ë¹„</h3>
        <p class="desc">ì„¤ì¹˜ í™˜ê²½ì— ë”°ë¼ ì¶”ê°€ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ í•­ëª©ì„ ìˆœì„œëŒ€ë¡œ ì„ íƒí•´ì£¼ì„¸ìš”.</p>

        <!-- Q1 ì£¼ì°¨ -->
        <div id="q1" class="question" style="display:block;">
          <p>1. ì£¼ì°¨ ê°€ëŠ¥í•œê°€ìš”?</p>
          <div class="row cols-2">
            <button class="btn btn-img" onclick="guardAndNext(this,'q1','q2','0')">
              <span class="thumb"><img src="car.jpg" alt=""></span>
              <span class="label">YES</span>
            </button>
            <button class="btn btn-img" onclick="guardAndNext(this,'q1','q2','20000')">
              <span class="thumb"><img src="road.jpg" alt=""></span>
              <span class="label">NO (ì£¼ì°¨ ë° ì´ë™ë¹„ 2ë§Œì› ì¶”ê°€)</span>
            </button>
          </div>
        </div>

        <!-- Q2 ì—˜ë¦¬ë² ì´í„° -->
        <div id="q2" class="question" style="display:none;">
          <p>2. ì—˜ë¦¬ë² ì´í„°(E/V) ì´ìš© ê°€ëŠ¥í•œê°€ìš”?</p>
          <div class="row cols-2">
            <button class="btn btn-img" onclick="guardAndNext(this,'q2','q3','0')">
              <span class="thumb"><img src="ev.jpg" alt=""></span>
              <span class="label">YES</span>
            </button>
            <button class="btn btn-img" onclick="guardAndNext(this,'q2','q3','30000~50000')">
              <span class="thumb"><img src="step.jpg" alt=""></span>
              <span class="label">NO (ì§€ìƒ ê¸°ì¤€ 3ì¸µë¶€í„° 3~5ë§Œì› ì¶”ê°€)</span>
            </button>
          </div>
          <div class="nav-row">
            <button class="btn btn-outline" onclick="goBack()">â¬… ì´ì „</button>
            <button class="btn btn-outline" onclick="goToStart()">â¬… ì²˜ìŒìœ¼ë¡œ</button>
          </div>
        </div>

        <!-- Q3 ì‹¤ì™¸ê¸° ì„¤ì¹˜ -->
        <div id="q3" class="question" style="display:none;">
          <p>3. ì‹¤ì™¸ê¸° ì„¤ì¹˜ ì¥ì†ŒëŠ”?</p>
          <div class="row cols-2">
            <button class="btn btn-img" onclick="toQ3Indoor()">
              <span class="thumb"><img src="brd2.jpg" alt=""></span>
              <span class="label">ì‹¤ë‚´</span>
            </button>
            <button class="btn btn-img" onclick="toQ3Outdoor()">
              <span class="thumb"><img src="out.jpg" alt=""></span>
              <span class="label">ì‹¤ì™¸</span>
            </button>
          </div>

          <div id="q3_sub" class="subwrap" style="display:none;">

            <!-- 3-1 ì‹¤ë‚´ ë² ì´ìŠ¤ -->
            <div id="q3_1" class="question fade" style="display:none;">
              <p>3-1. (ì‹¤ë‚´) ë² ì´ìŠ¤ê°€ í•„ìš”í•œê°€ìš”?</p>
              <div class="row cols-2">
                <button class="btn btn-img" onclick="showFade('q3_1_1')">
                  <span class="thumb"><img src="/" alt=""></span>
                  <span class="label">YES</span>
                </button>
                <button class="btn btn-img" onclick="completeQ3Step(this,'q3_1','0')">
                  <span class="thumb"><img src="/" alt=""></span>
                  <span class="label">NO</span>
                </button>
              </div>

              <!-- 3-1-1 ë² ì´ìŠ¤ ê¸ˆì•¡ -->
              <div id="q3_1_1" class="question fade" style="display:none;">
                <p>3-1-1. êµ¬ë§¤í•˜ì‹¤ ë² ì´ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <div class="row cols-3">
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_1_1','10000')">
                    <span class="thumb"><img src="/" alt=""></span>
                    <span class="label">1ë§Œì›</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_1_1','30000')">
                    <span class="thumb"><img src="/" alt=""></span>
                    <span class="label">3ë§Œì›</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_1_1','50000')">
                    <span class="thumb"><img src="/" alt=""></span>
                    <span class="label">5ë§Œì›</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- 3-2 ì‹¤ì™¸ ì•µê¸€ -->
            <div id="q3_2" class="question fade" style="display:none;">
              <p>3-2. (ì‹¤ì™¸) ì•µê¸€ì„ ë³´ìœ í•˜ê³  ìˆë‚˜ìš”?</p>
              <div class="row cols-2">
                <button class="btn btn-img" onclick="chooseAngleHave(this)">
                  <span class="thumb"><img src="angle2.jpg" alt=""></span>
                  <span class="label">Yes</span>
                </button>
                <button class="btn btn-img" onclick="chooseAngleNeed(this)">
                  <span class="thumb"><img src="angle3.jpg" alt=""></span>
                  <span class="label">No</span>
                </button>
              </div>

              <!-- 3-2-1 ë³´ìœ  â†’ ìƒíƒœ -->
              <div id="q3_2_1" class="question fade" style="display:none;">
                <p>3-2-1. (ë³´ìœ ) ì•µê¸€ ìƒíƒœê°€ ì–´ë–¤ê°€ìš”?</p>
                <div class="row cols-2">
                  <button class="btn btn-img" onclick="showQ3_2_1_1(this)">
                    <span class="thumb"><img src="notinstall3.jpg" alt=""></span>
                    <span class="label">ë¯¸ì„¤ì¹˜</span>
                  </button>
                  <button class="btn btn-img" onclick="showQ3_2_1_2(this)">
                    <span class="thumb"><img src="install2.jpg" alt=""></span>
                    <span class="label">ì„¤ì¹˜</span>
                  </button>
                </div>
              </div>

              <!-- 3-2-1-1 (ë¯¸ì„¤ì¹˜) -->
              <div id="q3_2_1_1" class="question fade" style="display:none;">
                <p>3-2-1-1. (ë¯¸ì„¤ì¹˜ì‹œ) ì—ì–´ì»¨ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <div class="row cols-3">
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_1','70000')">
                    <span class="thumb"><img src="wall_cool.png" alt=""></span>
                    <span class="label">ë²½ê±¸ì´í˜•(7ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_1','90000')">
                    <span class="thumb"><img src="stand_3.png" alt=""></span>
                    <span class="label">ê°€ì •ìš© ìŠ¤íƒ ë“œí˜•(9ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_1','90000')">
                    <span class="thumb"><img src="multi.png" alt=""></span>
                    <span class="label">ë©€í‹°í˜•(2in1) (9ë§Œì› ì¶”ê°€)</span>
                  </button>
                </div>
              </div>

              <!-- 3-2-1-2 (ì„¤ì¹˜) -->
              <div id="q3_2_1_2" class="question fade" style="display:none;">
                <p>3-2-1-2. (ì„¤ì¹˜ì‹œ) ì—ì–´ì»¨ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <div class="row cols-3">
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_2','30000~50000')">
                    <span class="thumb"><img src="wall_cool.png" alt=""></span>
                    <span class="label">ë²½ê±¸ì´í˜•(3~5ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_2','50000')">
                    <span class="thumb"><img src="stand_3.png" alt=""></span>
                    <span class="label">ê°€ì •ìš© ìŠ¤íƒ ë“œí˜•(5ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_1_2','50000')">
                    <span class="thumb"><img src="multi.png" alt=""></span>
                    <span class="label">ë©€í‹°í˜•(2in1) (5ë§Œì› ì¶”ê°€)</span>
                  </button>
                </div>
              </div>

              <!-- 3-2-2 ë¯¸ë³´ìœ  â†’ êµ¬ë§¤ì•¡ -->
              <div id="q3_2_2" class="question fade" style="display:none;">
                <p>3-2-2. (ë¯¸ë³´ìœ ì‹œ) êµ¬ë§¤í•˜ì‹¤ ì—ì–´ì»¨ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <div class="row cols-2">
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_2','100000')">
                    <span class="thumb"><img src="wall_cool.png" alt=""></span>
                    <span class="label">ë²½ê±¸ì´í˜• 6~9í‰ (10ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_2','130000')">
                    <span class="thumb"><img src="wall_cool.png" alt=""></span>
                    <span class="label">ë²½ê±¸ì´í˜• 10~16í‰ (13ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_2','130000')">
                    <span class="thumb"><img src="stand_3.png" alt=""></span>
                    <span class="label">ê°€ì •ìš© ìŠ¤íƒ ë“œí˜• (13ë§Œì› ì¶”ê°€)</span>
                  </button>
                  <button class="btn btn-img" onclick="completeQ3Step(this,'q3_2_2','130000')">
                    <span class="thumb"><img src="multi.png" alt=""></span>
                    <span class="label">ë©€í‹°í˜•(2in1) (13ë§Œì› ì¶”ê°€)</span>
                  </button>
                </div>
              </div>

            </div><!-- /q3_2 -->

          </div><!-- /q3_sub -->

          <div class="nav-row">
            <button class="btn btn-outline" onclick="goBack()">â¬… ì´ì „</button>
            <button class="btn btn-outline" onclick="goToStart()">â¬… ì²˜ìŒìœ¼ë¡œ</button>
          </div>
        </div>

        <!-- Q4 ë°°ê´€ ê¸¸ì´ -->
        <div id="q8" class="question" style="display:none;">
          <p>4. (ì˜ˆìƒ) ì´ ë°°ê´€ ê¸¸ì´ëŠ” ëª‡ mì¸ê°€ìš”?</p>

          <!-- ë‹¨ì¼í˜• ì…ë ¥ -->
          <input type="number" id="pipeLength" placeholder="ì˜ˆ: 6 (m)" inputmode="numeric" min="0" step="1" />

          <div id="pipeInfo_general">
            <p class="desc" style="margin-top:10px;"><ê¸°ë³¸ ì‘ì—…ì— ë°°ê´€ 5m + íƒ€ê³µ 1íšŒê°€ í¬í•¨ë©ë‹ˆë‹¤.></p><br>
            <p class="desc" style="margin-top:8px;">
              â€»ë°°ê´€ ê¸¸ì´ê°€ 6m ì´ìƒì¼ ê²½ìš°, 1m ë‹¹ ì¶”ê°€ ê¸ˆì•¡ì´ ë°œìƒí•©ë‹ˆë‹¤. <br></p>
            <p style="font-weight: 400;">
              * ë²½ê±¸ì´í˜•(ëƒ‰ë°© ì „ìš©) <br>
              - 6~9í‰: 18,000ì› <br>
              - 10~16í‰: 20,000ì› </p><br>

            <p style="font-weight: 400%;">
              * ë²½ê±¸ì´í˜•(ëƒ‰ë‚œë°© ê²¸ìš©) <br>
              - 7~9í‰: 20,000ì› <br>
              - 10~16í‰: 22,000ì› </p><br>

            <p style="font-weight: 400%;">
              * ìŠ¤íƒ ë“œí˜•(ëƒ‰ë°© ì „ìš©) <br>
              - 12~25í‰: 25,000ì› <br> </p><br>

            <p class="desc" style="margin-top:10px;">
              â€»ë°°ê´€ ì—°ì¥ ì‹œ ëƒ‰ë§¤ ë³´ì¶©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.<br> </p>

            <p style="font-weight: 400%;">
              - ê° ì¶”ê°€ ë°°ê´€ 5m ì´í•˜ì¸ ê²½ìš° 30,000ì› ì¶”ê°€  <br>
              - ê° ì¶”ê°€ ë°°ê´€ 5m ì´ˆê³¼ì¸ ê²½ìš° 50,000ì› ì¶”ê°€      <br>
            </p>
          </div>

          <!-- ë©€í‹°í˜• ì „ìš© ì…ë ¥ (2ì¹¸) -->
          <div id="pipeInputs_multi" style="display:none; margin-top:12px;">
            <p style="margin:6px 0 6px;"><strong>*ë©€í‹°í˜•(ë²½ê±¸ì´+ìŠ¤íƒ ë“œ)</strong> â€” ì´ ë°°ê´€ ê¸¸ì´ë¥¼ ê°ê° ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            <div class="grid-2">
              <div>
                <label>ë²½ê±¸ì´í˜• ì´ ë°°ê´€ ê¸¸ì´ (m)</label>
                <input type="number" id="pipeLength_wall" placeholder="ì˜ˆ: 6" inputmode="numeric" min="0" step="1" />
              </div>
              <div>
                <label>ìŠ¤íƒ ë“œí˜• ì´ ë°°ê´€ ê¸¸ì´ (m)</label>
                <input type="number" id="pipeLength_stand" placeholder="ì˜ˆ: 8" inputmode="numeric" min="0" step="1" />
              </div>
            </div>
            <p class="desc" style="margin-top:10px;"><ê¸°ë³¸ ì‘ì—…ì— ë°°ê´€ 5m + íƒ€ê³µ 1íšŒê°€ í¬í•¨ë©ë‹ˆë‹¤.></p><br>

            <p class="desc" style="margin-top:8px;">
              â€»ê° ë°°ê´€ ê¸¸ì´ê°€ 6m ì´ìƒì¼ ê²½ìš°, 1m ë‹¹ ì¶”ê°€ ê¸ˆì•¡ì´ ë°œìƒí•©ë‹ˆë‹¤. <br></p>
            <p style="font-weight: 400%;">
              * ë©€í‹°í˜•(2in1) ê¸°ì¤€ <br>
              - ë²½ê±¸ì´í˜•: ì¶”ê°€ 1më‹¹ 18,000ì› <br>
              - ìŠ¤íƒ ë“œí˜•: ì¶”ê°€ 1më‹¹ 25,000ì› </p><br>

            <p class="desc" style="margin-top:10px;">
              â€»ë°°ê´€ ì—°ì¥ ì‹œ ëƒ‰ë§¤ ë³´ì¶©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.<br> </p>

            <p style="font-weight: 400%;">
              - ê° ì¶”ê°€ ë°°ê´€ 5m ì´í•˜ì¸ ê²½ìš° 30,000ì› ì¶”ê°€  <br>
              - ê° ì¶”ê°€ ë°°ê´€ 5m ì´ˆê³¼ì¸ ê²½ìš° 50,000ì› ì¶”ê°€      <br>
            </p>
          </div>

          <div class="row" style="display:grid !important;grid-template-columns:1fr;justify-items:center;gap:12px;margin-top:12px;">
            <button class="btn" onclick="finishPipe()">ì œì¶œ</button>
          </div>
        </div>

        <!-- ê²°ê³¼ -->
        <div id="resultBox">
          <h3>ğŸ§¾ ì˜ˆìƒ ê²¬ì </h3>
          <p id="resultText"></p>
          <p style="margin-top:10px;color:#555;font-weight:bold;">â€» ì‹¤ì œ í˜„ì¥ í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>

    <!-- ì•„ë˜ì— ë”°ë¡œ ìˆë˜ ê²½ê³  p íƒœê·¸ëŠ” ì‚­ì œë¨ -->

    <div class="cta">
      <a href="https://pf.kakao.com/_SpvFn" target="_blank" rel="noopener">ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜í•˜ê¸°</a>
      <a href="tel:0517248176">ì „í™” ìƒë‹´í•˜ê¸°</a>
    </div>
    <br><br><br>
    <div class="lastlogo">
      <img src="logo.png" style="display:block;margin:0 auto;max-width:300px" alt="íŒŒë€ì‹œìŠ¤í…œ ë¡œê³ ">
    </div>
  </div>
</div>
<br><br>

<script>
/* =================== ì „ì—­ ìŠ¤íƒ€ì¼ ì£¼ì… (btn-img ê±´ë“¤ì§€ ì•ŠìŒ) =================== */
(function injectGlobalStyles(){
  const css = `
  .global-nav{
    position: static;
    display:flex;justify-content:center;gap:10px;
    margin-top:16px;padding:10px 0;border-top:1px solid #e5e7eb;
    background:transparent;
  }
  .global-nav .btn,.global-nav .btn-outline{
    background:#fff !important;color:#007bff;border:1px solid #007bff;
    box-shadow:none !important;outline:none !important
  }
  .global-nav .btn:hover,.global-nav .btn-outline:hover{ background:#fff !important }

  .nav-row{display:none !important}

  .fade{opacity:0;transform:translateY(-6px);transition:opacity .4s ease,transform .4s ease}
  .fade.show{opacity:1;transform:none}

  .card.active{
    background:#eaf4ff;border-color:#007bff;
    box-shadow:0 8px 22px rgba(0,123,255,.25),0 2px 6px rgba(0,0,0,.08);
    transform:translateY(-2px)
  }
  `;
  const s=document.createElement('style'); s.textContent=css; document.head.appendChild(s);
})();

/* =================== fade =================== */
const _fadeTimers = new Map();
function showFade(id){
  const el=document.getElementById(id); if(!el) return;
  const t=_fadeTimers.get(id); if(t){clearTimeout(t);_fadeTimers.delete(id);}
  el.style.display='block'; requestAnimationFrame(()=>el.classList.add('show'));
}
function hideFade(id){
  const el=document.getElementById(id); if(!el) return;
  if(getComputedStyle(el).display==='none') return;
  el.classList.remove('show');
  const prev=_fadeTimers.get(id); if(prev) clearTimeout(prev);
  const to=setTimeout(()=>{ if(!el.classList.contains('show')) el.style.display='none'; _fadeTimers.delete(id); },440);
  _fadeTimers.set(id,to);
}
// ì¦‰ì‹œ ìˆ¨ê¹€
function forceHide(id){
  const el=document.getElementById(id); if(!el) return;
  const t=_fadeTimers.get(id); if(t){ clearTimeout(t); _fadeTimers.delete(id); }
  el.classList.remove('show'); el.style.display='none';
}

/* =================== ìƒíƒœ & ìœ í‹¸ =================== */
let basePrice=0,selectedACType=null,addMin=0,addMax=0,pipeRatePerM=0;
const SHOW_ZERO_ITEMS=false;
const historyStack=[],costStack=[],selections={},stepsOrder=[],addItems=[];
function fmt(n){return Number(n||0).toLocaleString();}
function parseRange(v){if(!v)return[0,0];const r=String(v).replace(/,/g,'');if(r.includes('~')){const[a,b]=r.split('~').map(Number);return[a||0,b||a||0];}const n=Number(r)||0;return[n,n];}
function getBtnLabel(el){return(el?.querySelector?.('.label')?.innerText?.trim()||el?.innerText?.trim()||'').replace(/\s+/g,' ');}
function scrollIntoViewSmooth(el){el?.scrollIntoView({behavior:'smooth',block:'start'});}
function recomputeAddTotals(){addItems.length=0;addMin=0;addMax=0;for(const k of stepsOrder){const s=selections[k];if(!s)continue;addItems.push(s);addMin+=s.min||0;addMax+=s.max||0;}}
function normalizeItem({label,min,max,stepId}){if(stepId==='q3_2_2'&&/^(\d+)\s*ë§Œì›$/.test(label))label='ì•µê¸€ '+label;return{label,min,max,stepId};}
function formatItemLine(i){const{label,min,max}=i;if(!SHOW_ZERO_ITEMS&&min===0&&max===0)return null;const p=(min===max)?`${fmt(min)}ì›`:`${fmt(min)}ì› ~ ${fmt(max)}ì›`;return`${label}: ${p}`;}
function upsertSelection(id,label,min,max){
  const ex=!!selections[id];
  selections[id]={label,min,max,stepId:id};
  if(!ex){stepsOrder.push(id);historyStack.push(id);costStack.push([min,max]);}
  recomputeAddTotals();renderResultIfOpen();
}

/* ë‹¨ê³„ ë¦¬ì…‹ */
function resetFrom(startId){
  const order = [
    'q1','q2','q3','q3_sub',
    'q3_1','q3_1_1',
    'q3_2','q3_2_1','q3_2_1_1','q3_2_1_2','q3_2_2',
    'q8'
  ];
  const startIdx = order.indexOf(startId);
  if (startIdx === -1) return;

  for (let i = startIdx + 1; i < order.length; i++){
    const id = order[i];
    const el = document.getElementById(id);
    if (!el) continue;

    if (el.classList && el.classList.contains('fade')) {
      forceHide(id);
    } else {
      el.style.display = 'none';
    }
    el.querySelectorAll?.('.btn,.btn-img')?.forEach(b=>b.classList.remove('active'));
    if (selections[id]) delete selections[id];
  }

  while (historyStack.length) {
    const last = historyStack[historyStack.length - 1];
    if (order.indexOf(last) > startIdx) {
      historyStack.pop();
      costStack.pop();
    } else break;
  }

  recomputeAddTotals();
  renderResultIfOpen();
}

/* =================== ê¸°ë³¸ì„¤ì¹˜ =================== */
const isMulti = () => selectedACType === 'multi';
function showPipeInputs(){
  const one   = document.getElementById('pipeLength');
  const multi = document.getElementById('pipeInputs_multi');
  const info  = document.getElementById('pipeInfo_general');

  if(isMulti()){
    if(one)   one.style.display   = 'none';
    if(multi) multi.style.display = 'block';
    if(info)  info.style.display  = 'none';
  }else{
    if(one)   one.style.display   = 'block';
    if(multi) multi.style.display = 'none';
    if(info)  info.style.display  = 'block';
  }
}
function showOptions(opt,card,type){
  document.querySelectorAll('.option-box').forEach(e=>e.style.display='none');
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
  card.classList.add('active');
  selectedACType=type||null;basePrice=0;pipeRatePerM=0;
  document.getElementById('baseMoveResult').style.display='none';
  lockAdditional();
  addItems.length=0;for(const k in selections)delete selections[k];stepsOrder.length=0;
  document.getElementById(opt).style.display='block';
}
function selectBasePrice(type, price, rate){
  // ğŸ”¹ 1) ì–´ë–¤ ë²„íŠ¼ì„ ëˆŒë €ëŠ”ì§€ ì°¾ì•„ì„œ active í´ë˜ìŠ¤ ê´€ë¦¬
  let btn = null;
  if (window.event) {
    btn = window.event.currentTarget || window.event.target;
  }
  if (btn) {
    // ê°™ì€ ì˜µì…˜ ë°•ìŠ¤ ì•ˆì˜ ë‹¤ë¥¸ ë²„íŠ¼ active ì œê±°
    const box = btn.closest('.option-box');
    if (box) {
      box.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
    }
    // ì§€ê¸ˆ í´ë¦­í•œ ë²„íŠ¼ë§Œ active
    btn.classList.add('active');
  }

  // ğŸ”¹ 2) ì›ë˜ í•˜ë˜ ê¸°ë³¸ ì„¤ì¹˜ë¹„ ë¡œì§ ê·¸ëŒ€ë¡œ ìœ ì§€
  selectedACType = type;
  basePrice      = +price || 0;
  pipeRatePerM   = +rate  || 0;

  document.getElementById('baseMovePrice').innerText = fmt(basePrice);
  document.getElementById('baseMoveResult').style.display = 'block';

  unlockAdditional();
  showPipeInputs();
  scrollIntoViewSmooth(document.getElementById('part3'));
  renderResultIfOpen();
}

/* =================== ì¶”ê°€ì„¤ì¹˜ ê³µí†µ =================== */
function guardAndNext(el,cur,nxt,cost){
  if(!isAdditionalUnlocked()) return alert('ë¨¼ì € â‘  ê¸°ë³¸ ì„¤ì¹˜ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
  nextQuestion(el,cur,nxt,cost);
}
function nextQuestion(el,cur,nxt,cost){
  resetFrom(cur);
  const [min,max]=parseRange(cost); const label=getBtnLabel(el);
  upsertSelection(cur,label,min,max);
  const stepRoot=document.getElementById(cur);
  stepRoot?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');

  const next=document.getElementById(nxt);
  if(next){
    if(next.classList.contains('fade')) showFade(nxt); else next.style.display='block';
    if(cur==='q2' && nxt==='q3'){
      scrollIntoViewSmooth(next);
      setTimeout(()=>{ window.scrollBy({top:80,left:0,behavior:'smooth'}); },120);
    }else{
      scrollIntoViewSmooth(next);
    }
    positionNav(next);
  }
}

/* ====== Q3(ì‹¤ë‚´/ì‹¤ì™¸) ====== */
function _markQ3ChoiceActive(clickedBtn){
  const group=document.querySelector('#q3 .row'); if(!group) return;
  group.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  if(clickedBtn) clickedBtn.classList.add('active');
}
function _getClickedBtnFromInlineEvent(){
  const ev=window.event; if(!ev) return null;
  const target=ev.target||ev.srcElement;
  return target?.closest?.('.btn,.btn-img')||null;
}
// âœ… ì‹¤ë‚´ ì„ íƒ ì‹œ: ì‹¤ë‚´ë¡œ ì„ íƒë§Œ ê¸°ë¡í•˜ê³ , ë°”ë¡œ Q4(ë°°ê´€ ê¸¸ì´)ë¡œ ì´ë™
function toQ3Indoor(){
  if(!isAdditionalUnlocked()) {
    alert('ë¨¼ì € â‘  ê¸°ë³¸ ì„¤ì¹˜ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
    return;
  }

  const btn = _getClickedBtnFromInlineEvent();
  _markQ3ChoiceActive(btn);

  // Q3 ì´í›„ ë‹¨ê³„ë“¤ ì´ˆê¸°í™”
  resetFrom('q3');

  // Q3 ì„ íƒê°’(ì‹¤ë‚´, ì¶”ê°€ë¹„ìš© 0ì›) ì €ì¥
  upsertSelection('q3', 'ì‹¤ë‚´', 0, 0);

  // ì‹¤ë‚´ ê´€ë ¨ í•˜ìœ„ ì§ˆë¬¸ë“¤ì€ ê°•ì œë¡œ ìˆ¨ê¹€
  forceHide('q3_1');
  forceHide('q3_1_1');
  forceHide('q3_2');
  forceHide('q3_2_1');
  forceHide('q3_2_1_1');
  forceHide('q3_2_1_2');
  forceHide('q3_2_2');

  // Q3 ì„¹ì…˜ì€ ê·¸ëŒ€ë¡œ ë³´ì—¬ë‘ê³ , ë°”ë¡œ Q4ë¡œ ì´ë™
  const q3 = document.getElementById('q3');
  if(q3) q3.style.display = 'block';

  const q4 = document.getElementById('q8');
  if(q4){
    q4.style.display = 'block';
    scrollIntoViewSmooth(q4);
    positionNav(q4);
  }

  // ê²°ê³¼ ë°•ìŠ¤ ì—´ë ¤ìˆìœ¼ë©´ í•©ê³„ ë‹¤ì‹œ ê³„ì‚°
  renderResultIfOpen();
}
function toQ3Outdoor(){
  if(!isAdditionalUnlocked()) return alert('ë¨¼ì € ê¸°ë³¸ ì„¤ì¹˜ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
  const btn=_getClickedBtnFromInlineEvent(); _markQ3ChoiceActive(btn);
  resetFrom('q3'); showQ3('out');
}
function showQ3(mode){
  const q3=document.getElementById('q3'), sub=document.getElementById('q3_sub');
  q3.style.display='block'; sub.style.display='block';
  if(mode==='in'){
    forceHide('q3_2'); forceHide('q3_2_1'); forceHide('q3_2_2'); forceHide('q3_2_1_1'); forceHide('q3_2_1_2');
    showFade('q3_1'); positionNav(document.getElementById('q3_1'));
  }else{
    forceHide('q3_1'); forceHide('q3_1_1');
    showFade('q3_2'); positionNav(document.getElementById('q3_2'));
  }
  scrollIntoViewSmooth(q3);
}

/* ====== 3-2 Yes/No ====== */
function chooseAngleHave(btn){
  resetFrom('q3_2');
  const root=document.getElementById('q3_2');
  root?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  btn?.classList.add('active');
  forceHide('q3_2_2'); forceHide('q3_2_1_1'); forceHide('q3_2_1_2');
  showFade('q3_2_1');
  scrollIntoViewSmooth(document.getElementById('q3_2_1')); positionNav(document.getElementById('q3_2_1'));
}
function chooseAngleNeed(btn){
  resetFrom('q3_2');
  const root=document.getElementById('q3_2');
  root?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  btn?.classList.add('active');
  forceHide('q3_2_1'); forceHide('q3_2_1_1'); forceHide('q3_2_1_2');
  showFade('q3_2_2');
  scrollIntoViewSmooth(document.getElementById('q3_2_2')); positionNav(document.getElementById('q3_2_2'));
}

/* === 3-2-1 í•˜ìœ„ === */
function showQ3_2_1_1(btn){
  resetFrom('q3_2_1');
  const root=document.getElementById('q3_2_1');
  root?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  btn?.classList.add('active');
  forceHide('q3_2_1_2'); showFade('q3_2_1_1');
  scrollIntoViewSmooth(document.getElementById('q3_2_1_1')); positionNav(document.getElementById('q3_2_1_1'));
}
function showQ3_2_1_2(btn){
  resetFrom('q3_2_1');
  const root=document.getElementById('q3_2_1');
  root?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  btn?.classList.add('active');
  forceHide('q3_2_1_1'); showFade('q3_2_1_2');
  scrollIntoViewSmooth(document.getElementById('q3_2_1_2')); positionNav(document.getElementById('q3_2_1_2'));
}

/* === ìµœì¢… ì„ íƒ === */
function completeQ3Step(el,id,cost){
  resetFrom(id);
  const[min,max]=parseRange(cost); const label=getBtnLabel(el);
  upsertSelection(id,label,min,max);
  const stepRoot=document.getElementById(id);
  stepRoot?.querySelectorAll('.btn,.btn-img').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');

  const q4=document.getElementById('q8'); q4.style.display='block';
  scrollIntoViewSmooth(q4); positionNav(q4);
}

/* =================== ê²°ê³¼ ê³„ì‚° =================== */
function refillFee(extraM){
  if(extraM<=0) return 0;
  return extraM<=5 ? 30000 : 50000;
}
function buildEstimateHTML(len){
  const extra=Math.max(0,len-5); let per=0,ref=0;
  const pipeType=['wallCool','wallHeat','stand'].includes(selectedACType);
  if(pipeType&&extra>0){ per=(pipeRatePerM||0)*extra; ref=refillFee(extra); }

  const addTMin=addMin+per+ref, addTMax=addMax+per+ref;
  const grandMin=basePrice+addTMin, grandMax=basePrice+addTMax;

  const lines=[];
  lines.push(`[ê¸°ë³¸ ì„¤ì¹˜ë¹„]: ${fmt(basePrice)}ì›`, '');
  const rendered=addItems.map(normalizeItem).map(formatItemLine).filter(Boolean);
  lines.push('[ì¶”ê°€ ì„¤ì¹˜ë¹„]'); if(rendered.length) lines.push(rendered.join('<br>')); lines.push('');

  if(pipeType){
    if(extra>0){
      lines.push(`ë°°ê´€ ì—°ì¥: ${extra}m Ã— ${fmt(pipeRatePerM)}ì› = ${fmt(per)}ì›`,
                 `ëƒ‰ë§¤ ë³´ì¶©: ${fmt(ref)}ì›`);
    }else{
      lines.push(`ë°°ê´€ ì—°ì¥: ì—†ìŒ (ì´ ${len}m, ê¸°ë³¸ 5m í¬í•¨)`);
    }
  }else{
    lines.push('ë°°ê´€ ì¶”ê°€ë‹¨ê°€: ë©€í‹°í˜•(2in1) â€” ë²½ê±¸ì´ 18,000ì›/m, ìŠ¤íƒ ë“œ 25,000ì›/m (ì•„ë˜ ì…ë ¥ìœ¼ë¡œ ê³„ì‚°)');
  }
  lines.push('');

  if(addTMin===addTMax){
    lines.push(`í•©ê³„(ì¶”ê°€ ì„¤ì¹˜ë¹„): ${fmt(addTMin)}ì›`, '',
               `<strong>ê¸°ë³¸ ì„¤ì¹˜ë¹„ + ì¶”ê°€ ì„¤ì¹˜ë¹„ í•©ê³„: ${fmt(grandMin)}ì›</strong>`);
  }else{
    lines.push(`í•©ê³„(ì¶”ê°€ ì„¤ì¹˜ë¹„): ${fmt(addTMin)}ì› ~ ${fmt(addTMax)}ì›`, '',
               `<strong>ê¸°ë³¸ ì„¤ì¹˜ë¹„ + ì¶”ê°€ ì„¤ì¹˜ë¹„ í•©ê³„: ${fmt(grandMin)}ì› ~ ${fmt(grandMax)}ì›</strong>`);
  }
  return lines.map(l=>l===''?'<br>':l).join('<br>');
}
function buildEstimateHTMLMulti(wallLen, standLen){
  const wExtra = Math.max(0, (parseInt(wallLen)||0) - 5);
  const sExtra = Math.max(0, (parseInt(standLen)||0) - 5);
  const wPer   = wExtra * 18000;
  const sPer   = sExtra * 25000;
  const wRef   = refillFee(wExtra);
  const sRef   = refillFee(sExtra);

  const per = wPer + sPer;
  const ref = wRef + sRef;

  const rendered = addItems.map(normalizeItem).map(formatItemLine).filter(Boolean);

  const addTMin = addMin + per + ref;
  const addTMax = addMax + per + ref;
  const grandMin = basePrice + addTMin;
  const grandMax = basePrice + addTMax;

  const lines = [];
  lines.push(`[ê¸°ë³¸ ì„¤ì¹˜ë¹„]: ${fmt(basePrice)}ì›`, '');
  lines.push('[ì¶”ê°€ ì„¤ì¹˜ë¹„]'); if(rendered.length) lines.push(rendered.join('<br>')); if(!rendered.length) lines.push('(ê¸°íƒ€ í•­ëª© ì—†ìŒ)');
  lines.push('',
    `ë²½ê±¸ì´í˜• ë°°ê´€ ì—°ì¥: ${wExtra}m Ã— 18,000ì› = ${fmt(wPer)}ì›`,
    `ìŠ¤íƒ ë“œí˜• ë°°ê´€ ì—°ì¥: ${sExtra}m Ã— 25,000ì› = ${fmt(sPer)}ì›`,
    `ëƒ‰ë§¤ ë³´ì¶©ë¹„(ë²½ê±¸ì´): ${fmt(wRef)}ì›`,
    `ëƒ‰ë§¤ ë³´ì¶©ë¹„(ìŠ¤íƒ ë“œ): ${fmt(sRef)}ì›`,
    ''
  );

  if(addTMin===addTMax){
    lines.push(`í•©ê³„(ì¶”ê°€ ì„¤ì¹˜ë¹„): ${fmt(addTMin)}ì›`, '',
               `<strong>ê¸°ë³¸ ì„¤ì¹˜ë¹„ + ì¶”ê°€ ì„¤ì¹˜ë¹„ í•©ê³„: ${fmt(grandMin)}ì›</strong>`);
  }else{
    lines.push(`í•©ê³„(ì¶”ê°€ ì„¤ì¹˜ë¹„): ${fmt(addTMin)}ì› ~ ${fmt(addTMax)}ì›`, '',
               `<strong>ê¸°ë³¸ ì„¤ì¹˜ë¹„ + ì¶”ê°€ ì„¤ì¹˜ë¹„ í•©ê³„: ${fmt(grandMin)}ì› ~ ${fmt(grandMax)}ì›</strong>`);
  }
  return lines.map(l=>l===''?'<br>':l).join('<br>');
}
function renderResultIfOpen(){
  const box=document.getElementById('resultBox'); if(!box||box.style.display==='none')return;
  if(isMulti()){
    const wl = parseInt((document.getElementById('pipeLength_wall')?.value || '0')) || 0;
    const sl = parseInt((document.getElementById('pipeLength_stand')?.value || '0')) || 0;
    document.getElementById('resultText').innerHTML = buildEstimateHTMLMulti(wl, sl);
  }else{
    const len=parseInt((document.getElementById('pipeLength')?.value || '0').replace(/[^0-9]/g,''))||0;
    document.getElementById('resultText').innerHTML=buildEstimateHTML(len);
  }
}
function finishPipe(){
  if(!isAdditionalUnlocked()) return alert('ë¨¼ì € â‘  ê¸°ë³¸ ì„¤ì¹˜ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
  if(isMulti()){
    const wl = parseInt((document.getElementById('pipeLength_wall')?.value || '0')) || 0;
    const sl = parseInt((document.getElementById('pipeLength_stand')?.value || '0')) || 0;
    document.getElementById('resultText').innerHTML = buildEstimateHTMLMulti(wl, sl);
  }else{
    const len = parseInt((document.getElementById('pipeLength')?.value || '0').replace(/[^0-9]/g,'')) || 0;
    document.getElementById('resultText').innerHTML = buildEstimateHTML(len);
  }
  const box=document.getElementById('resultBox'); box.style.display='block';
  scrollIntoViewSmooth(box); positionNav(box);
}

/* =================== ë„¤ë¹„ê²Œì´ì…˜ =================== */
function goBack(){
  if(!historyStack.length) return;
  const prev=historyStack.pop(); costStack.pop(); delete selections[prev];
  recomputeAddTotals(); renderResultIfOpen();

  const nextMap={q1:'q2', q2:'q3'};
  if(prev.startsWith('q3')) document.getElementById('q8').style.display='none';
  else{
    const hide=nextMap[prev]; if(hide) document.getElementById(hide).style.display='none';
    document.getElementById('q8').style.display='none';
  }
  document.getElementById('resultBox').style.display='none';

  const last=document.querySelector('#part3 .question[style*="block"]:last-of-type')||document.getElementById('q1');
  positionNav(last);
}
function goToStart(){
  historyStack.length=0; costStack.length=0; stepsOrder.length=0;
  for(const k in selections) delete selections[k];
  addMin=0; addMax=0; addItems.length=0;

  document.getElementById('resultBox').style.display='none';
  ['q2','q3','q8'].forEach(id=>{const el=document.getElementById(id); if(el) el.style.display='none';});
  if(isAdditionalUnlocked()) document.getElementById('q1').style.display='block';
  positionNav(document.getElementById('q1'));
}

/* =================== ì ê¸ˆ/í•´ì œ =================== */
function lockAdditional(){
  const sec=document.getElementById('part3'); if(sec) sec.style.display='none';
  historyStack.length=0; costStack.length=0; stepsOrder.length=0; addMin=0; addMax=0;
  for(const k in selections) delete selections[k];
  ['q1','q2','q3','q8'].forEach(id=>{const el=document.getElementById(id); if(el) el.style.display=(id==='q1'?'block':'none');});
  ['q3_1','q3_1_1','q3_2','q3_2_1','q3_2_1_1','q3_2_1_2','q3_2_2'].forEach(id=>forceHide(id));
  document.getElementById('resultBox').style.display='none';
  positionNav(document.getElementById('q1'));
}
function unlockAdditional(){
  const s=document.getElementById('part3'); if(s) s.style.display='block';
  document.getElementById('q1').style.display='block';
  positionNav(document.getElementById('q1'));
}
function isAdditionalUnlocked(){ return basePrice>0 && !!selectedACType; }

/* =================== ì „ì—­ ë„¤ë¹„ =================== */
function ensureGlobalNav(){
  let nav=document.querySelector('.global-nav');
  if(!nav){
    nav=document.createElement('div');
    nav.className='global-nav';
    nav.innerHTML=`<button class="btn btn-outline" id="gn-back">â¬… ì´ì „</button>
                   <button class="btn btn-outline" id="gn-home">â†© ì²˜ìŒìœ¼ë¡œ</button>`;
    document.body.appendChild(nav);
    nav.querySelector('#gn-back').addEventListener('click',goBack);
    nav.querySelector('#gn-home').addEventListener('click',goToStart);
  }
  return nav;
}
function positionNav(targetEl){
  const nav=ensureGlobalNav(); if(!targetEl) return; targetEl.after(nav);
}

/* =================== ì´ˆê¸°í™” =================== */
document.addEventListener('DOMContentLoaded',()=>{
  document.querySelectorAll('button:not([type])').forEach(b=>b.type='button');
  ensureGlobalNav(); lockAdditional(); showPipeInputs();

  // 3-2 Yes/No ë²„íŠ¼ ì „ìš© ì—°ê²°(ë³´í˜¸)
  const q32 = document.querySelector('#q3_2 .row');
  if(q32){
    const yesBtn = q32.children[0];
    const noBtn  = q32.children[1];
    if(yesBtn){ yesBtn.onclick = (e)=>{ e.preventDefault(); chooseAngleHave(yesBtn); }; }
    if(noBtn){  noBtn.onclick  = (e)=>{ e.preventDefault(); chooseAngleNeed(noBtn);  }; }
  }
});

/* =================== q3_2_2 4/2/1 ì»¬ëŸ¼ ë°˜ì‘í˜• =================== */
function updateQ322Layout() {
  const row = document.querySelector('#q3_2_2 .row');
  if (!row) return;
  row.style.display = 'grid';
  row.style.gap = '16px';

  let cols = 1;
  if (window.innerWidth >= 1024) {
    cols = 4;
  } else if (window.innerWidth >= 600) {
    cols = 2;
  } else {
    cols = 1;
  }
  row.style.gridTemplateColumns = `repeat(${cols}, minmax(0, 1fr))`;
}
window.addEventListener('load', updateQ322Layout);
window.addEventListener('resize', updateQ322Layout);



</script>
</body>
</html>
